<?php

/**
 * Created by PhpStorm.
 * User: alex
 * Date: 21.08.18
 * Time: 16:58
 */
namespace frontend\components;
use frontend\models\SendForm;

/**
 * Class SendFormWidget
 * @package frontend\components
 * @property $upload_file_btn_class
 */
class SendFormWidget extends \yii\base\Widget
{
    const SITE = 0;
    const SKYPE = 1;
    
    const FILES = 'files[]';
    const FILE = 'file';

    public $subject;
    public $upload_file_btn_class = 'btn-input-file';
    public $upload_file_container_id = 'wrapperCont';
    public $upload_file_wrapper_title = 'itemWrapper';
    public $upload_file_container_title = 'itemTitle';
    public $upload_file_submit_id = 'submit';
    public $upload_file_delete_title = 'delItem';
    public $upload_file_input_class = 'input-file';
    public $messageLabel;
    public $messagePlaceholder = 'Введи сопроводительный текст...';
    public $textButton = 'Отправить бриф';
    public $isLabels = false;
    public $idForm = 'send_vacancy';
//    public $fileExtension = "jpg, jpeg, png, gif, zip, rar, pdf, doc, xls";
    public $fileExtension = "Максимальный размер - 2 мб";
    public $skypeOrSite = self::SKYPE;
    public $fileOrFiles = self::FILES;
    public $field;
    public $answer = 'Бриф отправлен!';
    public $id_answer = 'brief__mess';

    public function run()
    {
        parent::run(); // TODO: Change the autogenerated stub
        $model = new SendForm();
        $model->subject = $this->subject;
        if ($this->isLabels) $model->setRadioList();
        if ($this->skypeOrSite == self::SKYPE) $this->field = 'skype';
        if ($this->skypeOrSite == self::SITE) $this->field = 'site';

        return $this->render('send-form/form', [
            'model' => $model,
            'widget' => $this,
        ]);
    }
}